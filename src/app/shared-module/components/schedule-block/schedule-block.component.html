<!--
 ~ Copyright (c) 2024 by Miłosz Gilga <https://miloszgilga.pl>
 ~ Silesian University of Technology
 -->

<ng-container *ngIf="weekdayData">
  <div
    class="schedule-block-component__container"
    (click)="handleOpenDetailsModal()"
    [ngStyle]='{
      height: weekdayData.elementHeight + "px",
      top: (weekdayData.positionFromTop + addedPxFromTop) + "px",
      backgroundColor: weekdayData.subjectTypeHexColor
    }'>
    <div class="schedule-block-component__layered-button"></div>
    <p>{{ weekdayData.subjectWithTypeAlias }}</p>
    <p class="hide-elements-on-small-devices">{{ weekdayData.subjectTime }}</p>
    <p *ngIf="hasKey('teachers')" class="hide-elements-on-small-devices">
      <a
        *ngFor="let teacher of weekdayData.aliases.teachers; index as idx"
        routerLink="/schedule/selected-schedule"
        [queryParams]="fabricateRouteParams(teacher.pathValues, 'employer')"
        (click)="disableEventPropagation($event)"
        [class.anchor--disable-events]="hrefEventsDisabled"
        class="schedule-block__anchor-element">
        {{ teacher.alias }}
        <ng-container *ngIf="idx !== weekdayData.aliases.teachers!.length - 1">
          ,
        </ng-container>
      </a>
    </p>
    <p *ngIf="hasKey('rooms')">
      <a
        *ngFor="let room of weekdayData?.aliases?.rooms; index as idx"
        routerLink="/schedule/selected-schedule"
        [queryParams]="fabricateRouteParams(room.pathValues, 'room')"
        (click)="disableEventPropagation($event)"
        [class.anchor--disable-events]="hrefEventsDisabled"
        class="schedule-block__anchor-element">
        {{ room.alias }}
        <ng-container *ngIf="idx !== weekdayData.aliases.rooms!.length - 1">
          ,
        </ng-container>
      </a>
    </p>
    <p *ngIf="hasKey('groups')" class="hide-elements-on-small-devices">
      <a
        *ngFor="let group of weekdayData?.aliases?.groups; index as idx"
        routerLink="/schedule/selected-schedule"
        [queryParams]="fabricateRouteParams(group.pathValues, 'group')"
        (click)="disableEventPropagation($event)"
        [class.anchor--disable-events]="hrefEventsDisabled"
        class="schedule-block__anchor-element group-alias__anchor-element">
        {{ group.alias }}
      </a>
    </p>
    <div
      *ngIf="weekdayData.subjectOccuredData !== '' && !weekdayData.ifNotShowingOccuredDates"
      class="schedule-block__occur-container hide-elements-on-small-devices">
      <p>występowanie:</p>
      <p>{{ weekdayData.subjectOccuredData }}</p>
    </div>
  </div>
</ng-container>

<!--
 ~ Copyright (c) 2024 by Miłosz Gilga <https://miloszgilga.pl>
 ~ Silesian University of Technology
 -->

<div
  *ngIf="isLoading$ | async; else isLoadedContent"
  class="last-logins__no-content-container">
  <img
    src="assets/gif/suspense-loading-dark.gif"
    alt=""
    width="80px"
    height="80px" />
</div>
<ng-template #isLoadedContent>
  <div
    *ngIf="(savedAccounts$ | async)?.length === 0; else accountsContent"
    class="last-logins__no-content-container">
    <p class="last-logins__no-content-text">Brak zapisanych kont.</p>
  </div>
  <ng-template #accountsContent>
    <ul class="last-logins__list-container">
      <li
        *ngFor="let savedAccount of (savedAccounts$ | async)"
        [title]="savedAccount | userHoverInfo"
        class="last-logins__list-element">
        <button
          (click)="handleSelectAccount(savedAccount)"
          class="last-logins__button-element">
          <img
            *ngIf="savedAccount.profileImageUrl; else userIdentity"
            [src]="getSaveImageURL(savedAccount.profileImageUrl)"
            [alt]="savedAccount.nameWithSurname | userIdentity"
            class="last-logins__user-image" />
          <ng-template #userIdentity>
            {{ savedAccount.nameWithSurname | userIdentity }}
          </ng-template>
          <app-user-role-dot
            [userRole]="savedAccount.role"
            class="last-logins__role-dot-container" />
        </button>
        <button
          (click)="handleDeleteSavedAccount(savedAccount)"
          class="last-logins__remove-button"
          title="Kliknij aby usunąć konto z zapisanej listy">
          Usuń konto
        </button>
      </li>
    </ul>
    <div class="last-logins__delete-container">
      <button
        (click)="handleDeleteAllSavedAccounts()"
        class="app__button app__button--light app__button--hollow-light app__button--full-size-window"
        title="Kliknij aby usunąc wszystkie zapisane konta">
        Usuń wszystkie zapisane konta
        <ng-icon name="matArrowRightAlt" class="app__button__arrow" />
      </button>
    </div>
  </ng-template>
</ng-template>
